<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>区域ping感知对比</title>

    <link href="../../../statics/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap/3/css/bootstrap.css"/>
    <link href="../../../statics/css/font-awesome.min.css" rel="stylesheet">  <!--日期箭头-->
    <link href="../../../statics/css/style.css" rel="stylesheet">
    <link href="../../../statics/css/datepicker/daterangepicker.css" rel="stylesheet">
    <link href="../../../statics/css/area.css" rel="stylesheet">  <!--自定义CSS-->
    <!--<link href="../../../statics/css/typeaheadjs.css" rel="stylesheet">-->  <!--输入提示框typeahead-->

    <!-- Include Required Prerequisites -->
    <script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>  <!--用这个-->



</head>
<body>
<div id="wrapper">
    <div class="wrapper wrapper-content">
        <div class="row">

                        <form class="bs-example bs-example-form" role="form">
                            <div class="row" id="first_row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6"></div>    <!--自适应分辨率-->
                                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                    <div class="input-group">
                                        <span class="input-group-addon">区县:</span>
                                        <input type="text" class="form-control" id="area"  data-provide="typeahead">  <!--输入提示框typeahead-->
                                        <div class="input-group-btn" id="area_dropdown">
                                            <button type="button" class="btn btn-default dropdown-toggle"
                                                    data-toggle="dropdown">
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu pull-right" id="area_choose">  <!--应该为动态的-->
                                                <!--<li><a href="#">新城区</a></li>
                                                <li><a href="#">碑林区</a></li>
                                                <li><a href="#">莲湖区</a></li>
                                                <li><a href="#">雁塔区</a></li>
                                                <li><a href="#">未央区</a></li>
                                                <li><a href="#">灞桥区</a></li>
                                                <li><a href="#">长安区</a></li>
                                                <li><a href="#">阎良区</a></li>-->
                                                <li>                                       <!--Vue渲染列表-->
                                                    <a href="#" v-for="item in items">
                                                        {{ item.message }}
                                                    </a>
                                                </li>
                                            </ul>
                                        </div><!-- /btn-group -->
                                        <div id="message"></div>
                                    </div><!-- /input-group -->
                                </div><!-- /.col-lg-2 -->
                                <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1"></div>
                                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                    <!--<div class="input-daterange input-group" id="datepicker">
                                        <input type="text" class="input-sm form-control" name="start" value="05/14/2014">
                                        <span class="input-group-addon">to</span>
                                        <input type="text" class="input-sm form-control" name="end" value="05/22/2014">
                                    </div>-->
                                    <form class="bs-example bs-example-form" role="form">
                                        <div class="input-daterange input-group" id="datepicker">
                                            <span class="input-group-addon">时间:</span>
                                            <input type="text" class="form-control" name="daterange"
                                                   value="01/01/2015 - 01/31/2015"/>
                                        </div>
                                    </form>
                                </div>

                                <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1">
                                    <div class="btn-toolbar" role="toolbar">
                                        <div class="btn-group">
                                            <button type="button" class="btn btn-default">
                                                <span class="glyphicon glyphicon-repeat"></span>重置
                                            </button>
                                        </div>
                                    </div>
                                </div>

                            </div><!-- /.row -->
                        </form>

        </div><!-- /.row -->

        <div class="row"> <!-- /.row -->
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <span class="label label-primary pull-right">Today</span>
                        <h3>区县Ping对比</h3>
                    </div>
                    <div class="ibox-content">
                        <div class="row">     <!--切换按钮-->
                            <div class="btn-group" id="charts_button">                   <!--Vue事件监听-->
                                <button type="button" class="btn btn-default" v-on:click="delay">时延</button>
                                <button type="button" class="btn btn-default" v-on:click="loss">丢包</button>
                                <button type="button" class="btn btn-default" v-on:click="qoe">qoe</button>
                            </div>
                        </div>
                        <div class="row">     <!--highcharts图-->
                            <div id="container" style="height: 400px; margin: 0 auto"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div><!-- /.row -->
    </div>
</div>


<script src="../../../js/jquery-2.0.3.js"></script>
<script src="../../../js/jquery-2.0.3.min.js"></script>
<script src="../../../js/bootstrap.min.js"></script>
<script src="../../../js/bootstrap3-typeahead.min.js"></script>   <!--输入提示框typeahead-->
<script src="../../../js/highcharts/highcharts.js"></script>
<script src="../../../js/highcharts/exporting.js"></script>  <!--highcharts处理导出图片功能的js文件-->
<script src="../../../js/highcharts/Highcharts-zh_CN.js" charset="UTF-8"></script>    <!--导出按钮中文js文件-->
<script src="../../../js/datepicker/daterangepicker.js"></script> <!--时间选择器-->
<!--<script src="../../../js/datepicker/moment.min.js"></script>--> <!--这个js有问题,现在连的网上的-->
<script type="text/javascript" src="../../../statics/libs/vue.min.js"></script>

<script>
    var get_area;
    var flag = 0;    /*标志位,判断highcharts绘图Vue点击时间更新的series*/

    $(document).on("click", ".dropdown-menu li a", function () {
         get_area = $(this).text().trim();    /*trim()去除空格*/
        /*获取下拉值*/
        $('#area').val(get_area);
        /*区域选择框赋值*/
        console.log(get_area);
    });



    var area_choose = new Vue({
        el:'#area_choose',
        data:{
            items : [
                {message: '新城区'},
                {message: '碑林区'},
                {message: '莲湖区'},
                {message: '雁塔区'},
                {message: '未央区'},
                {message: '灞桥区'},
                {message: '长安区'},
                {message: '阎良区'}
            ]
        }
    });
    var new_data1=['新城区','碑林区','莲湖区','雁塔区','未央区','灞桥区','长安区','阎良区']
    $('#area').typeahead({     /*输入提示框*/
        source:new_data1,
        items:7        /*下拉菜单中显示的最大的条目数。*/
    })



</script>
<script language="JavaScript">
    var json = {};
    var options = {
    chart :{
        type: 'column'
    },
    title : {
        text: 'ping时延对比'
    },
     xAxis : {
        categories: ['新城区', '碑林区']
    },
     yAxis : {
        title: {
            text: '结果(ms)'
        }
    },
     credits : {
        enabled: false
    },
     series : [{
        name: '平均时延',
        data: [18,19]
    }, {
        name: '最大时延',
        data: [21,23]
    }, {
        name: '最小时延',
        data: [17,18]
    }
    ]
    };
    $(document).ready(function () {
        var chart = new Highcharts.Chart('container',options)
    });


    $('input[name="daterange"]').daterangepicker(
            {
                locale: {
                    format: 'YYYY-MM-DD'
                },
                startDate: '2013-01-01',
                endDate: '2013-12-31'
            },
            function (start, end, label) {          /*日期选择触发事件*/
                console.log("A new date range was chosen: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
                flag = 1;  /*改变标志位*/
                var get_data = {             /*模拟异步数据*/
                    AverageDelay : 18,
                    MaxDelay : 22,
                    MinDelay : 17,
                    Loss : 0.5,
                    Qoe : 98
                };
                options.xAxis = {
                    categories: [get_area]    /*图表中更改地区信息*/  /*[]必须要，不然出错*/
                };
                options.series = [{
                    name: '平均时延',
                    data: [get_data.AverageDelay]      /*[]必须要，不然出错*/
                }, {
                    name: '最大时延',
                    data: [get_data.MaxDelay]
                }, {
                    name: '最小时延',
                    data: [get_data.MinDelay]
                }
                ];
                var chart = new Highcharts.Chart('container',options);        /*重新绘制图表*/

                new_series_delay = [{
                    name: '平均时延',
                    data: [get_data.AverageDelay]      /*[]必须要，不然出错*/
                }, {
                    name: '最大时延',
                    data: [get_data.MaxDelay]
                }, {
                    name: '最小时延',
                    data: [get_data.MinDelay]
                }
                ];

                new_series_loss = [{
                    name: '丢包',
                    data: [get_data.Loss]
                }
                ];

                new_series_qoe = [{
                    name: 'qoe',
                    data: [get_data.Qoe]
                }
                ]

            });
    /*$('#datepicker').datetimepicker({
     minView: "month", //选择日期后，不会再跳转去选择时分秒
     format: "yyyy-mm-dd", //选择日期后，文本框显示的日期格式
     language: 'zh-CN', //汉化
     autoclose:true //选择日期后自动关闭
     });*/

</script>
<script>
    var button_change = new Vue({     /*实例化Vue*/
        el:'#charts_button',
        data: {
            option_delay:{   /*设置时延option*/
                title : {
                    text: 'ping时延对比'
                },
                series_delay :[{
                    name: '平均时延',
                    data: [18,19]
                }, {
                    name: '最大时延',
                    data: [21,23]
                }, {
                    name: '最小时延',
                    data: [17,18]
                }
                ],
                yAxis : {
                    title: {
                        text: '结果(ms)'
                    }
                }
            },
            option_qoe:{     /*设置qoe option*/
                title : {
                    text: 'qoe对比'
                },
                series_qoe :[{
                    name: 'qoe',
                    data: [93,96]
                }
                ],
                yAxis : {
                    title: {
                        text: '结果(分)'
                    },
                    max:100
                }
            },
            option_loss:{    /*设置丢包option*/
                title : {
                    text: '丢包率'
                },
                series_loss :[{
                    name: '丢包',
                    data: [0.03,0.01]
                }
                ],
                yAxis : {
                    title: {
                        text: '结果(%)'
                    },
                    max:100
                },
                tooltip: {     /*数据提示框*/
                    valueSuffix: '%'    /* y值后缀字符串*/
                }
            }



        },
        // 在 `methods` 对象中定义方法
        methods: {                        /*事件监听*/
            delay:function () {
                console.log("时延");
                options.title = this.option_delay.title;            /*设置标题*/
                if(flag==0){
                options.series = this.option_delay.series_delay;    /*设置数据*/
                }else {
                options.series = new_series_delay;                  /*series*/
                }
                options.yAxis = this.option_delay.yAxis;           /*设置y轴*/
                options.tooltip = {};                              /*设置数据提示框*/
                var chart = new Highcharts.Chart('container',options)    /*重新绘图*/
            },
            loss:function () {
                console.log("丢包");
                options.title = this.option_loss.title;
                if(flag==0) {
                    options.series = this.option_loss.series_loss;
                }else {
                    options.series = new_series_loss
                }
                options.yAxis = this.option_loss.yAxis;
                options.tooltip = this.option_loss.tooltip;
                var chart = new Highcharts.Chart('container',options)
            },
            qoe: function () {
                console.log("qoe");
                options.title = this.option_qoe.title;
                if(flag==0) {
                    options.series = this.option_qoe.series_qoe;
                }else {
                    options.series = new_series_qoe
                }
                options.yAxis = this.option_qoe.yAxis;
                options.tooltip = {};
                var chart = new Highcharts.Chart('container',options)
            }
        }
    });


</script>
</body>
</html>